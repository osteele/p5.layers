{"version":3,"sources":["p5.layers.js"],"names":[],"mappings":"KAEM,CAAA,cAAc,CAAG,E,CACjB,aAAa,CAAG,GAAI,CAAA,G,CACpB,yBAAyB,CAAG,CAAC,gBAAD,CAAmB,QAAnB,C,CAElC,QAAS,CAAA,UAAT,CAAoB,CAApB,CAAmC,CAAnC,CAAsC,CAAtC,CAAyC,CAAzC,CAAmD,CACjD,GAAI,CAAa,WAAY,CAAA,MAAzB,EAAmC,CAAC,WAAY,CAAA,MAApD,CACE,MAAO,CAAA,UAAU,CAAC,IAAD,CAAO,CAAP,CAAsB,CAAtB,CAAyB,CAAzB,CAAjB,CAEF,GAAI,CAAA,CAAQ,CAAG,CAAa,WAAY,CAAA,EAAE,CAAC,QAA5B,CACX,CADW,CAEX,aAAa,CAAC,GAAd,CAAkB,CAAlB,CAFJ,CAGK,CAP4C,GAQ/C,CAAQ,CAAG,cAAc,CAAC,CAAC,EAAI,KAAN,CAAa,CAAC,EAAI,MAAlB,CAA0B,CAAQ,EAAI,GAAtC,CARsB,CASzB,KAAlB,GAAA,CAT2C,EASlB,aAAa,CAAC,GAAd,CAAkB,CAAlB,CAAiC,CAAjC,CATkB,CAU/C,CAAQ,CAAC,UAAT,CAAoB,CAApB,CAV+C,CAW/C,CAAQ,CAAC,KAAT,EAX+C,OAc3C,CAAA,CAAQ,CAAG,MAdgC,CAe3C,CAAY,CAAG,GAAI,CAAA,GAfwB,CAgBjD,cAAc,CAAC,IAAf,CAAoB,CAAE,YAAY,CAAZ,CAAF,CAAgB,QAAQ,CAAR,CAAhB,CAA0B,OAAO,CAAE,CAAQ,GAAK,CAAhD,CAApB,CAhBiD,CAiBjD,IAAK,KAAM,CAAC,CAAD,CAAI,CAAJ,CAAX,EAAqB,CAAA,MAAM,CAAC,OAAP,CAAe,CAAf,CAArB,CACM,CAAC,GAAI,CAAA,EAAE,CAAC,SAAR,EAAqB,CAAC,GAAI,CAAA,CAA1B,EAAsC,CAAC,yBAAyB,CAAC,QAA1B,CAAmC,CAAnC,CAAvC,EAA6F,UAAb,QAAO,CAAA,CAD7F,GAEI,CAAY,CAAC,GAAb,CAAiB,CAAjB,CAAoB,CAAQ,CAAC,CAAD,CAA5B,CAFJ,CAGI,CAAQ,CAAC,CAAD,CAAR,CAAc,CAAC,GAAG,CAAJ,GAAa,CAAC,CAAC,KAAF,CAAQ,CAAR,CAAkB,CAAlB,CAH/B,EAMA,MAAO,CAAA,CACR,CAED,QAAS,CAAA,QAAT,CAAkB,CAAlB,CAAqB,CAArB,CAAwB,CAAxB,CAA2B,CAA3B,CAA8B,CAC5B,KAAM,CAAA,CAAQ,CAAG,MAAjB,CACA,GAAI,CAAC,cAAc,CAAC,MAApB,CAEE,WADA,CAAA,OAAO,CAAC,IAAR,CAAa,qDAAb,CACA,CAEF,KAAM,CAAE,YAAY,CAAZ,CAAF,CAAgB,QAAQ,CAAR,CAAhB,CAA0B,OAAO,CAAP,CAA1B,EAAsC,cAAc,CAAC,GAAf,EAA5C,CACA,IAAK,KAAM,CAAC,CAAD,CAAI,CAAJ,CAAX,EAAqB,CAAA,CAArB,CACE,CAAQ,CAAC,CAAD,CAAR,CAAc,CAAd,CAR0B,CAUxB,CAAC,SAAD,CAAkB,CAAlB,CAA4B,KAAA,CAVJ,GAW1B,KAAK,CAAC,CAAD,CAAW,CAAC,EAAI,CAAhB,CAAmB,CAAC,EAAI,CAAxB,CAA2B,CAA3B,CAA8B,CAA9B,CAER","file":"p5.layers.min.js","sourcesContent":["/* exported beginLayer endLayer */\n\nconst __p5LayerStack = [];\nconst __p5LayerDict = new Map();\nconst __p5LayerFunctionOmitlist = ['createGraphics', 'millis'];\n\nfunction beginLayer(graphicsOrKey, w, h, renderer) {\n  if (graphicsOrKey instanceof Number && w instanceof Number) {\n    return beginLayer(null, graphicsOrKey, w, h);\n  }\n  let graphics = graphicsOrKey instanceof p5.Graphics\n    ? graphicsOrKey\n    : __p5LayerDict.get(graphicsOrKey);\n  if (!graphics) {\n    graphics = createGraphics(w || width, h || height, renderer || P2D);\n    if (graphicsOrKey !== 'new') __p5LayerDict.set(graphicsOrKey, graphics);\n    graphics.background(0);\n    graphics.clear();\n  }\n\n  const instance = window;\n  const savedMethods = new Map();\n  __p5LayerStack.push({ savedMethods, graphics, managed: graphics !== graphicsOrKey });\n  for (const [k, v] of Object.entries(graphics)) {\n    if (k in p5.prototype && k in instance && !__p5LayerFunctionOmitlist.includes(k) && typeof v === 'function') {\n      savedMethods.set(k, instance[k]);\n      instance[k] = (...args) => v.apply(graphics, args);\n    }\n  }\n  return graphics;\n}\n\nfunction endLayer(x, y, w, h) {\n  const instance = window;\n  if (!__p5LayerStack.length) {\n    console.warn('endLayer() was called without matching beginLayer()');\n    return;\n  }\n  const { savedMethods, graphics, managed } = __p5LayerStack.pop();\n  for (const [k, v] of savedMethods) {\n    instance[k] = v;\n  }\n  if (x === undefined ? managed : x !== false) {\n    image(graphics, x || 0, y || 0, w, h)\n  }\n}\n"]}