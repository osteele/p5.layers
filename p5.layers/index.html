<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Home</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Home</h1>

    



    


    <h3> </h3>










    




    <section>
        <article><h1>p5.layers</h1>
<p><a href="https://www.npmjs.com/package/p5.layers"><img src="https://badge.fury.io/js/p5.layers.svg" alt="npm version"></a></p>
<p>p5.layers is a <a href="https://p5js.org">p5.js</a> library that simplifies some common
use cases for <a href="https://p5js.org/reference/#/p5/createGraphics">p5.js Graphics</a>
objects.</p>
<p>It does this by addings this functionality to p5.js:</p>
<ul>
<li>A new pair of functions, <code>beginLayer()</code> and <code>endLayer()</code>, handles
variable-free creation and use of a Graphics.</li>
<li>The p5.js draw and other canvas functions (e.g. <code>rect()</code> , <code>fill()</code>) operate
either on the canvas, or on the current layer (p5.Graphics instance), depending on
whether they are called between a call to <code>beginLayer()</code> / <code>endLayer()</code>.</li>
</ul>
<p><img src="examples/screenshots/trail.gif" alt="trail example animation">
<img src="examples/screenshots/slices.gif" alt="trail example animation"></p>
<p>You can find a collection of examples <a href="./examples">here</a>.</p>
<p>For example:</p>
<pre class="prettyprint source lang-js"><code>// with p5.layer
function draw() {
  // ...
  beginLayer();
  background(100);
  fill('blue');
  circle(width / 2, height / 2, 100);
  endLayer();
}
</code></pre>
<p>is equivalent to:</p>
<pre class="prettyprint source lang-js"><code>// without p5.layer
function setup() {
  // ...
  let pg = createGraphics(100, 100);
}

function draw() {
  // ...
  pg.background(100);
  pg.fill('blue');
  pg.circle(pg.width / 2, pg.height / 2, 100);
  image(pg, 0, 0);
}
</code></pre>
<p>The version with <code>beginLayer()</code> doesn't require the use of <code>pg.</code> as a prefix in
order to affect the created Graphics. This makes it easier to change your mind
about what goes inside of a layer (or what happens in which of several layers),
and to write functions that can apply to either the canvas and or a layer.</p>
<p>The Graphics instances that <code>beginLayer()</code> creates persist across calls to
<code>draw()</code>. For example, the following code, from
<a href="./examples/lissajous/sketch.js">examples/lissajous/sketch.js</a>, leaves a trail
of circles, because the layer is only partially erased (the second argument to
<code>background()</code> is a value that indicates partial opacity). It is drawn onto a
canvas that is completely erased each frame, as required by the other code in
the <code>draw()</code> function in that file.</p>
<pre class="prettyprint source lang-js"><code>  beginLayer();
  background(100, 10);
  let x = map(sin(millis() / 500), -1, 1, 0, width);
  let y = map(sin(millis() / 700), -1, 1, 0, height);
  circle(x, y, 20);
  endLayer();
</code></pre>
<p>The equivalent functionality, without using <code>beginLayer()</code> and <code>endLayer()</code>,
would require code that is distributed among <code>setup()</code>, <code>draw()</code>, and the global
context:</p>
<pre class="prettyprint source lang-js"><code>let pg;

function setup() {
  // ...
  pg = createGraphics(width, height);
}

function draw() {
  // ...
  pg.background(100, 10);
  let x = map(sin(millis() / 500), -1, 1, 0, pg.width);
  let y = map(sin(millis() / 700), -1, 1, 0, pg.height);
  pg.circle(x, y, 20);
  image(pg, 0, 0);
}
</code></pre>
<h2>Installation Options</h2>
<h3>Option 1: Using a CDN</h3>
<p>Use the online version by adding the following line to your HTML document:</p>
<pre class="prettyprint source lang-html"><code>&lt;script src=&quot;https://unpkg.com/p5.layers@1&quot;>&lt;/script>
</code></pre>
<h3>Option 2: Downloading the library file</h3>
<p>Alternatively, download <code>p5.layers.min.js</code> from this repository. Include it in your HTML
document by adding this line, after the line that includes <code>p5.js</code> or
<code>p5.min.js</code>:</p>
<pre class="prettyprint source lang-html"><code>&lt;script src=&quot;p5.layers.min.js&quot;>&lt;/script>
</code></pre>
<h3>Option 3: Using p5-server</h3>
<p>The <a href="https://github.com/osteele/p5-server#readme">p5-server</a> command-line tool,
and the <a href="https://marketplace.visualstudio.com/items?itemName=osteele.p5-server">P5 Server Visual Studio Code
Extension</a>,
will each infer this library from the presence of call to <code>beginLayer()</code> in a
JavaScript-only sketch (one without an HTML file).</p>
<h2>Reference</h2>
<h3><code>beginLayer()</code></h3>
<p>Sets the p5.js global functions <code>background()</code>, <code>draw()</code> etc. to render into the
specified layer. If no layer is specified, one is created.</p>
<p>Syntax:</p>
<blockquote>
<p><code>beginLayer()</code>
<code>beginLayer([width, height, [renderer]])</code></p>
</blockquote>
<p>The first time this function is called, it creates an instance of p5.Graphics.
Subsequent calls return this instance. (If the arguments are omitted, the
Graphics is created at the canvas width and height.) On subsequent calls, the
<code>width</code>, <code>height</code>, and <code>renderer</code> arguments are ignored, and the
previously-created instance is used.</p>
<p><code>beginLayer()</code> returns the Graphics.</p>
<blockquote>
<p><code>beginLayer(key, [width, height, renderer])</code></p>
</blockquote>
<p>This form can be used to create multiple layers. <code>beginLayer()</code> will create a
new layer for each distinct <code>key</code>. The special key value <code>&quot;new&quot;</code> always creates
a new layer.</p>
<blockquote>
<p><code>beginLayer(graphics)</code></p>
</blockquote>
<p>This form can be used to set global draw functions to render onto a Graphics
that was created by <code>createGraphics()</code>.</p>
<h3><code>endLayer()</code></h3>
<p>Restores the global draw functions <code>rect()</code> etc. so that they operate on the
canvas again, instead of the Graphics created by or passed as an argument to
<code>beginLayer()</code>. This function also draws the Graphics onto the canvas â€“ although
this behavior can be suppressed.</p>
<p>Syntax:</p>
<blockquote>
<p><code>endLayer()</code></p>
</blockquote>
<p>Restores the global draw functions, and draws the Graphics onto the canvas
unless the argument to <code>enterGraphics()</code> was a Graphics.</p>
<blockquote>
<p><code>endLayer(x, y, [width, height])</code></p>
</blockquote>
<p>Restores the global draw functions, and draws the Graphics onto the canvas.</p>
<blockquote>
<p><code>endLayer(false)</code></p>
</blockquote>
<p>Restores the global draw functions. Does not draw the Graphics onto the canvas.</p>
<h2>Motivation</h2>
<ol>
<li>My students in Creative Coding frequently wanted to use the equivalent of the
Layers concept that is common in GUI painting and drawing programs. I found
that this was a significant hurdle, both because of the terminology and the
mechanics.</li>
<li>Because the p5.Graphics functions are methods on the instance, changing code
to operate on the canvas such that it instead operates p5.Graphics requires a
significant amount of editing.</li>
</ol>
<h2>Caveats</h2>
<ul>
<li>The code only works in <a href="https://github.com/processing/p5.js/wiki/Global-and-instance-mode">global
mode</a>. It
does not check whether it is running in global mode.</li>
<li>The code does not validate its arguments, and does not use the p5.js Friendly
Error System.</li>
<li>The code has only been tested in modern browsers.</li>
</ul>
<h2>License</h2>
<p>MIT</p></article>
    </section>






</div>

<nav>
    <h2><a href="index.html">Home</a></h2>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Thu Sep 09 2021 16:01:33 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>